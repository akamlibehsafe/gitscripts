#!/bin/bash

# environment_uninstall
# Comprehensive uninstallation script that removes ALL components installed by
# environment_install including Git tools, GitHub directory, PAT tokens, symlinks, etc.

set -e  # Exit on error

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[1;34m'
NC='\033[0m' # No Color

# Function to print error messages
error() {
    echo -e "${RED}Error: $1${NC}" >&2
    exit 1
}

# Function to print success messages
success() {
    echo -e "${GREEN}$1${NC}"
}

# Function to print info messages
info() {
    echo -e "${YELLOW}$1${NC}"
}

# Function to print prompt messages
prompt() {
    echo -e "${BLUE}$1${NC}"
}

# Function to print section headers
section() {
    echo ""
    echo -e "${BLUE}=== $1 ===${NC}"
    echo ""
}

# Check if running on macOS
if [[ "$OSTYPE" != "darwin"* ]]; then
    error "This script is designed for macOS only. Detected OS: $OSTYPE"
fi

info "Starting Environment Uninstallation for macOS..."
info "This script will remove ALL components installed by environment_install."
echo ""

# Warning message
prompt "WARNING: This script will COMPLETELY REMOVE:"
echo "  ‚Ä¢ All Git repositories in ~/Documents/GitHub (after checking for pending pushes)"
echo "  ‚Ä¢ Git, Git LFS, GitHub CLI tools"
echo "  ‚Ä¢ PAT tokens from shell configuration files"
echo "  ‚Ä¢ Symlinks in ~/bin/ (gitak_*, zsh_install)"
echo "  ‚Ä¢ Aliases in ~/.zshrc (cdg, cda, cdf, cds)"
echo "  ‚Ä¢ Cursor Desktop (if installed via Homebrew)"
echo "  ‚Ä¢ iTerm2 (if installed via Homebrew)"
echo "  ‚Ä¢ Oh My Zsh and Powerlevel10k theme"
echo "  ‚Ä¢ Zsh plugins (zsh-autosuggestions, zsh-syntax-highlighting)"
echo ""
info "This script will NOT remove:"
echo "  ‚Ä¢ Homebrew (system package manager)"
echo ""
prompt "Continue with complete uninstallation? (y/N)"
read -r CONFIRM

if [[ ! "$CONFIRM" =~ ^[Yy]$ ]]; then
    info "Uninstallation cancelled."
    exit 0
fi

# Detect shell type for configuration file
SHELL_NAME=$(basename "$SHELL")
SHELL_CONFIG=""

if [[ "$SHELL_NAME" == "zsh" ]]; then
    SHELL_CONFIG="$HOME/.zshrc"
elif [[ "$SHELL_NAME" == "bash" ]]; then
    SHELL_CONFIG="$HOME/.bashrc"
    if [ -f "$HOME/.bash_profile" ] && [ ! -f "$HOME/.bashrc" ]; then
        SHELL_CONFIG="$HOME/.bash_profile"
    fi
else
    info "Warning: Unknown shell '$SHELL_NAME'. Defaulting to .zshrc"
    SHELL_CONFIG="$HOME/.zshrc"
fi

info "Detected shell: $SHELL_NAME"
info "Configuration file: $SHELL_CONFIG"

# Get all shell config files to check for PAT tokens
SHELL_CONFIGS=("$SHELL_CONFIG")
if [ -f "$HOME/.bash_profile" ] && [ "$SHELL_CONFIG" != "$HOME/.bash_profile" ]; then
    SHELL_CONFIGS+=("$HOME/.bash_profile")
fi
if [ -f "$HOME/.bashrc" ] && [ "$SHELL_CONFIG" != "$HOME/.bashrc" ]; then
    SHELL_CONFIGS+=("$HOME/.bashrc")
fi
if [ -f "$HOME/.zshrc" ] && [ "$SHELL_CONFIG" != "$HOME/.zshrc" ]; then
    SHELL_CONFIGS+=("$HOME/.zshrc")
fi

GIT_ROOT_DIR="$HOME/Documents/GitHub"

# Function to check if a directory is a git repository
is_git_repo() {
    [ -d "$1/.git" ]
}

# Function to check for pending changes in a git repo
has_pending_changes() {
    local repo_dir="$1"
    cd "$repo_dir" || return 1
    
    # Check for uncommitted changes
    if ! git diff --quiet 2>/dev/null || ! git diff --staged --quiet 2>/dev/null || [ -n "$(git ls-files --others --exclude-standard 2>/dev/null)" ]; then
        return 0  # Has changes
    fi
    
    # Check for unpushed commits
    if git remote get-url origin &>/dev/null 2>&1; then
        local current_branch
        current_branch=$(git branch --show-current 2>/dev/null || echo "")
        if [ -n "$current_branch" ]; then
            git fetch origin "$current_branch" &>/dev/null || true
            local local_commit
            local_commit=$(git rev-parse "$current_branch" 2>/dev/null || echo "")
            local remote_commit
            remote_commit=$(git rev-parse "origin/$current_branch" 2>/dev/null || echo "")
            if [ "$local_commit" != "$remote_commit" ] && [ -n "$local_commit" ] && [ -n "$remote_commit" ]; then
                return 0  # Has unpushed commits
            fi
        fi
    fi
    
    return 1  # No pending changes
}

section "Step 0: Check for Pending Git Changes"

# Check for pending changes in ~/Documents/GitHub before deletion
if [ -d "$GIT_ROOT_DIR" ] && command -v git &> /dev/null; then
    info "Checking for pending git changes in $GIT_ROOT_DIR..."
    echo ""
    
    REPOS_WITH_CHANGES=()
    
    # Find all git repositories recursively
    # Use find to locate all .git directories, then get their parent directories
    while IFS= read -r repo_dir; do
        if [ -n "$repo_dir" ] && [ -d "$repo_dir" ] && is_git_repo "$repo_dir"; then
            if has_pending_changes "$repo_dir"; then
                REPOS_WITH_CHANGES+=("$repo_dir")
            fi
        fi
    done < <(find "$GIT_ROOT_DIR" -type d -name ".git" 2>/dev/null | sed 's|/.git$||' | grep -v '^$' || true)
    
    if [ ${#REPOS_WITH_CHANGES[@]} -gt 0 ]; then
        info "Found ${#REPOS_WITH_CHANGES[@]} repository(ies) with pending changes:"
        for repo in "${REPOS_WITH_CHANGES[@]}"; do
            echo "  ‚Ä¢ $repo"
        done
        echo ""
        prompt "Push pending changes before deletion? (Y/n)"
        read -r PUSH_CHANGES
        
        if [[ ! "$PUSH_CHANGES" =~ ^[Nn]$ ]]; then
            info "Attempting to push changes..."
            echo ""
            for repo in "${REPOS_WITH_CHANGES[@]}"; do
                info "Processing: $repo"
                cd "$repo" || continue
                
                # Try to use gitak_push if available, otherwise use git directly
                if command -v gitak_push &> /dev/null; then
                    info "Using gitak_push for $repo"
                    set +e
                    gitak_push -m "Final commit before environment uninstall - $(date '+%Y-%m-%d %H:%M:%S')" 2>&1 || info "Failed to push using gitak_push (will try git directly)"
                    set -e
                else
                    # Use git directly (basic push - assumes PAT is configured)
                    info "Using git push for $repo"
                    set +e
                    git add . 2>/dev/null || true
                    git commit -m "Final commit before environment uninstall - $(date '+%Y-%m-%d %H:%M:%S')" 2>/dev/null || true
                    git push 2>&1 || info "Note: Push may have failed (PAT may not be configured)"
                    set -e
                fi
                echo ""
            done
            success "Finished checking repositories for pending changes"
        else
            info "Skipping push - proceeding with deletion"
        fi
    else
        info "No pending changes found in git repositories"
    fi
else
    if [ ! -d "$GIT_ROOT_DIR" ]; then
        info "$GIT_ROOT_DIR directory not found - nothing to check"
    else
        info "Git not available - cannot check for pending changes"
    fi
fi

section "Step 1: Remove Symlinks"

# List of scripts that were symlinked
SCRIPTS=(
    "gitak_install"
    "gitak_create_from_local"
    "gitak_create_from_remote"
    "gitak_push"
    "gitak_verify_PAT"
    "zsh_install"
)

SYMLINKS_REMOVED=0
SYMLINKS_NOT_FOUND=0

if [ -d "$HOME/bin" ]; then
    info "Checking for symlinks in ~/bin/..."
    
    for script in "${SCRIPTS[@]}"; do
        SYMLINK_PATH="$HOME/bin/$script"
        
        if [ -L "$SYMLINK_PATH" ]; then
            rm "$SYMLINK_PATH"
            success "Removed symlink: $script"
            SYMLINKS_REMOVED=$((SYMLINKS_REMOVED + 1))
        elif [ -f "$SYMLINK_PATH" ]; then
            info "Found file (not symlink): $script"
            prompt "  Remove file? (y/N)"
            read -r REMOVE_FILE
            if [[ "$REMOVE_FILE" =~ ^[Yy]$ ]]; then
                rm "$SYMLINK_PATH"
                success "Removed file: $script"
                SYMLINKS_REMOVED=$((SYMLINKS_REMOVED + 1))
            else
                info "  Skipped: $script"
            fi
        else
            SYMLINKS_NOT_FOUND=$((SYMLINKS_NOT_FOUND + 1))
        fi
    done
    
    echo ""
    info "Symlinks removed: $SYMLINKS_REMOVED"
    info "Not found: $SYMLINKS_NOT_FOUND"
    
    # Optionally remove ~/bin directory if it's empty
    if [ -d "$HOME/bin" ] && [ -z "$(ls -A "$HOME/bin" 2>/dev/null)" ]; then
        prompt "~/bin is now empty. Remove ~/bin directory? (y/N)"
        read -r REMOVE_BIN
        if [[ "$REMOVE_BIN" =~ ^[Yy]$ ]]; then
            rmdir "$HOME/bin"
            success "Removed ~/bin directory"
        else
            info "Kept ~/bin directory"
        fi
    fi
else
    info "~/bin directory not found. No symlinks to remove."
fi

section "Step 2: Remove Aliases from ~/.zshrc"

if [ -f "$HOME/.zshrc" ]; then
    info "Checking for aliases in ~/.zshrc..."
    
    # Check if aliases section exists
    if grep -q "# Added by environment_install script" "$HOME/.zshrc" 2>/dev/null; then
        prompt "Found aliases added by environment_install. Remove them? (Y/n)"
        read -r REMOVE_ALIASES
        
        if [[ ! "$REMOVE_ALIASES" =~ ^[Nn]$ ]]; then
            # Remove lines from "# Useful aliases" to the last alias line (cds)
            if [[ "$OSTYPE" == "darwin"* ]]; then
                sed -i '' '/# Useful aliases for Git repositories/,/alias cds=/d' "$HOME/.zshrc" 2>/dev/null || true
            else
                sed -i '/# Useful aliases for Git repositories/,/alias cds=/d' "$HOME/.zshrc" 2>/dev/null || true
            fi
            
            # Also remove the "Added by environment_install" comment line if it exists
            if [[ "$OSTYPE" == "darwin"* ]]; then
                sed -i '' '/# Added by environment_install script/d' "$HOME/.zshrc" 2>/dev/null || true
            else
                sed -i '/# Added by environment_install script/d' "$HOME/.zshrc" 2>/dev/null || true
            fi
            
            success "Removed aliases from ~/.zshrc"
        else
            info "Aliases removal skipped"
        fi
    else
        info "No aliases section found in ~/.zshrc (added by environment_install)"
    fi
else
    info "~/.zshrc not found. No aliases to remove."
fi

section "Step 3: Remove PAT Tokens from Shell Configuration"

for config_file in "${SHELL_CONFIGS[@]}"; do
    if [ -f "$config_file" ]; then
        if grep -q "GH_TOKEN_fortegb\|GH_TOKEN_akamlibehsafe" "$config_file" 2>/dev/null; then
            prompt "Found PAT tokens in $config_file. Remove them? (Y/n)"
            read -r REMOVE_PATS
            
            if [[ ! "$REMOVE_PATS" =~ ^[Nn]$ ]]; then
                # Remove PAT export lines and related comments
                if [[ "$OSTYPE" == "darwin"* ]]; then
                    sed -i '' '/^export GH_TOKEN_/d' "$config_file" 2>/dev/null || true
                    sed -i '' '/# Git Automation Scripts - Personal Access Tokens/d' "$config_file" 2>/dev/null || true
                    sed -i '' '/# Added by gitak_install script/d' "$config_file" 2>/dev/null || true
                else
                    sed -i '/^export GH_TOKEN_/d' "$config_file" 2>/dev/null || true
                    sed -i '/# Git Automation Scripts - Personal Access Tokens/d' "$config_file" 2>/dev/null || true
                    sed -i '/# Added by gitak_install script/d' "$config_file" 2>/dev/null || true
                fi
                success "Removed PAT tokens from $config_file"
            else
                info "PAT tokens removal skipped for $config_file"
            fi
        else
            info "No PAT tokens found in $config_file"
        fi
    fi
done

section "Step 4: Uninstall Cursor Desktop"

if command -v brew &> /dev/null; then
    if brew list --cask cursor &>/dev/null 2>&1; then
        prompt "Cursor Desktop is installed via Homebrew. Uninstall it? (Y/n)"
        read -r UNINSTALL_CURSOR
        
        if [[ ! "$UNINSTALL_CURSOR" =~ ^[Nn]$ ]]; then
            info "Uninstalling Cursor Desktop..."
            if brew uninstall --cask cursor 2>/dev/null; then
                success "Cursor Desktop uninstalled successfully"
            else
                info "Failed to uninstall Cursor Desktop (may require manual removal)"
            fi
        else
            info "Cursor Desktop uninstallation skipped"
        fi
    else
        info "Cursor Desktop not found (installed via Homebrew)"
    fi
else
    info "Homebrew not found. Cannot check for Cursor Desktop installation."
fi

section "Step 5: Uninstall iTerm2"

if command -v brew &> /dev/null; then
    if brew list --cask iterm2 &>/dev/null 2>&1 || [ -d "/Applications/iTerm.app" ]; then
        prompt "iTerm2 is installed. Uninstall it? (Y/n)"
        read -r UNINSTALL_ITERM2
        
        if [[ ! "$UNINSTALL_ITERM2" =~ ^[Nn]$ ]]; then
            info "Uninstalling iTerm2..."
            if brew list --cask iterm2 &>/dev/null 2>&1; then
                if brew uninstall --cask iterm2 2>/dev/null; then
                    success "iTerm2 uninstalled successfully"
                else
                    info "Failed to uninstall iTerm2 via Homebrew (may require manual removal)"
                fi
            else
                info "iTerm2 not installed via Homebrew, but found in /Applications/iTerm.app"
                info "You may need to manually remove it from /Applications/iTerm.app"
            fi
        else
            info "iTerm2 uninstallation skipped"
        fi
    else
        info "iTerm2 not found (not installed via Homebrew or not in /Applications)"
    fi
else
    info "Homebrew not found. Cannot check for iTerm2 installation."
    if [ -d "/Applications/iTerm.app" ]; then
        prompt "iTerm2 found in /Applications/iTerm.app. Remove it manually? (y/N)"
        read -r REMOVE_ITERM2_MANUAL
        if [[ "$REMOVE_ITERM2_MANUAL" =~ ^[Yy]$ ]]; then
            info "To remove iTerm2 manually, run: rm -rf /Applications/iTerm.app"
        fi
    fi
fi

section "Step 6: Uninstall Git, Git LFS, and GitHub CLI"

if command -v brew &> /dev/null; then
    TOOLS_TO_REMOVE=()
    
    if brew list git &>/dev/null 2>&1; then
        TOOLS_TO_REMOVE+=("git")
    fi
    
    if brew list git-lfs &>/dev/null 2>&1; then
        TOOLS_TO_REMOVE+=("git-lfs")
    fi
    
    if brew list gh &>/dev/null 2>&1; then
        TOOLS_TO_REMOVE+=("gh")
    fi
    
    if [ ${#TOOLS_TO_REMOVE[@]} -gt 0 ]; then
        info "Found Git tools installed via Homebrew: ${TOOLS_TO_REMOVE[*]}"
        prompt "Uninstall Git tools? (Y/n)"
        read -r UNINSTALL_GIT
        
        if [[ ! "$UNINSTALL_GIT" =~ ^[Nn]$ ]]; then
            for tool in "${TOOLS_TO_REMOVE[@]}"; do
                info "Uninstalling $tool..."
                set +e
                brew uninstall "$tool" 2>/dev/null && success "$tool uninstalled" || info "Failed to uninstall $tool (may have dependencies)"
                set -e
            done
        else
            info "Git tools uninstallation skipped"
        fi
    else
        info "Git tools not found (installed via Homebrew)"
    fi
else
    info "Homebrew not found. Cannot check for Git tools installation."
fi

section "Step 7: Remove ~/Documents/GitHub Directory"

if [ -d "$GIT_ROOT_DIR" ]; then
    prompt "Remove ~/Documents/GitHub directory and all its contents? (Y/n)"
    echo "  This will DELETE all repositories in $GIT_ROOT_DIR"
    read -r REMOVE_GITHUB_DIR
    
    if [[ ! "$REMOVE_GITHUB_DIR" =~ ^[Nn]$ ]]; then
        info "Removing $GIT_ROOT_DIR and all its contents..."
        rm -rf "$GIT_ROOT_DIR"
        success "Removed $GIT_ROOT_DIR directory"
    else
        info "GitHub directory removal skipped"
    fi
else
    info "$GIT_ROOT_DIR directory not found"
fi

section "Step 8: Uninstall Oh My Zsh and Powerlevel10k"

if [ -d "$HOME/.oh-my-zsh" ]; then
    prompt "Oh My Zsh is installed. Uninstall it? (Y/n)"
    echo "  This will remove ~/.oh-my-zsh directory"
    read -r UNINSTALL_OHMYZSH
    
    if [[ ! "$UNINSTALL_OHMYZSH" =~ ^[Nn]$ ]]; then
        info "Uninstalling Oh My Zsh..."
        
        # Backup .zshrc before removing Oh My Zsh
        if [ -f "$HOME/.zshrc" ]; then
            BACKUP_FILE="$HOME/.zshrc.backup.$(date +%Y%m%d_%H%M%S)"
            info "Backing up .zshrc to $BACKUP_FILE"
            cp "$HOME/.zshrc" "$BACKUP_FILE"
        fi
        
        # Remove Oh My Zsh directory
        rm -rf "$HOME/.oh-my-zsh"
        success "Oh My Zsh uninstalled (removed ~/.oh-my-zsh)"
        
        if [ -f "$BACKUP_FILE" ]; then
            info "Backup created: $BACKUP_FILE"
            info "You may want to restore or clean up ~/.zshrc manually"
        fi
    else
        info "Oh My Zsh uninstallation skipped"
    fi
else
    info "Oh My Zsh not found (~/.oh-my-zsh does not exist)"
fi

# Check for Powerlevel10k theme directory
if [ -d "$HOME/.oh-my-zsh/custom/themes/powerlevel10k" ] || [ -d "$HOME/.powerlevel10k" ]; then
    prompt "Powerlevel10k theme found. Remove it? (Y/n)"
    read -r REMOVE_P10K
    
    if [[ ! "$REMOVE_P10K" =~ ^[Nn]$ ]]; then
        if [ -d "$HOME/.oh-my-zsh/custom/themes/powerlevel10k" ]; then
            rm -rf "$HOME/.oh-my-zsh/custom/themes/powerlevel10k"
            success "Removed Powerlevel10k from Oh My Zsh themes"
        fi
        if [ -d "$HOME/.powerlevel10k" ]; then
            rm -rf "$HOME/.powerlevel10k"
            success "Removed Powerlevel10k standalone directory"
        fi
    else
        info "Powerlevel10k removal skipped"
    fi
else
    info "Powerlevel10k theme not found"
fi

section "Step 9: Remove Zsh Plugins"

if [ -d "$HOME/.oh-my-zsh/custom/plugins" ]; then
    PLUGINS_REMOVED=0
    
    # Check for zsh-autosuggestions
    if [ -d "$HOME/.oh-my-zsh/custom/plugins/zsh-autosuggestions" ]; then
        prompt "Remove zsh-autosuggestions plugin? (Y/n)"
        read -r REMOVE_AUTOSUGGESTIONS
        if [[ ! "$REMOVE_AUTOSUGGESTIONS" =~ ^[Nn]$ ]]; then
            rm -rf "$HOME/.oh-my-zsh/custom/plugins/zsh-autosuggestions"
            success "Removed zsh-autosuggestions plugin"
            PLUGINS_REMOVED=$((PLUGINS_REMOVED + 1))
        fi
    fi
    
    # Check for zsh-syntax-highlighting
    if [ -d "$HOME/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting" ]; then
        prompt "Remove zsh-syntax-highlighting plugin? (Y/n)"
        read -r REMOVE_SYNTAX
        if [[ ! "$REMOVE_SYNTAX" =~ ^[Nn]$ ]]; then
            rm -rf "$HOME/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting"
            success "Removed zsh-syntax-highlighting plugin"
            PLUGINS_REMOVED=$((PLUGINS_REMOVED + 1))
        fi
    fi
    
    if [ $PLUGINS_REMOVED -eq 0 ]; then
        info "No zsh plugins to remove (or removal was skipped)"
    fi
else
    info "Zsh plugins directory not found"
fi

section "Step 10: Remove PATH Addition for ~/bin"

if [ -f "$SHELL_CONFIG" ]; then
    if grep -q '# Add ~/bin to PATH for git scripts' "$SHELL_CONFIG" 2>/dev/null || \
       grep -q 'export PATH="$HOME/bin:$PATH"' "$SHELL_CONFIG" 2>/dev/null; then
        prompt "Found PATH addition for ~/bin in $SHELL_CONFIG. Remove it? (Y/n)"
        read -r REMOVE_PATH
        
        if [[ ! "$REMOVE_PATH" =~ ^[Nn]$ ]]; then
            # Remove the PATH export lines
            if [[ "$OSTYPE" == "darwin"* ]]; then
                sed -i '' '/# Add ~\/bin to PATH for git scripts/d' "$SHELL_CONFIG" 2>/dev/null || true
                sed -i '' '/export PATH="\$HOME\/bin:\$PATH"/d' "$SHELL_CONFIG" 2>/dev/null || true
            else
                sed -i '/# Add ~\/bin to PATH for git scripts/d' "$SHELL_CONFIG" 2>/dev/null || true
                sed -i '/export PATH="\$HOME\/bin:\$PATH"/d' "$SHELL_CONFIG" 2>/dev/null || true
            fi
            success "Removed PATH addition from $SHELL_CONFIG"
        else
            info "PATH removal skipped"
        fi
    else
        info "No PATH addition found in $SHELL_CONFIG"
    fi
else
    info "$SHELL_CONFIG not found. No PATH changes to remove."
fi

section "Uninstallation Complete!"

success "Environment uninstallation completed!"
echo ""

info "Removed components:"
echo "  ‚úì Symlinks in ~/bin/"
echo "  ‚úì Aliases in ~/.zshrc"
echo "  ‚úì PAT tokens from shell configuration files"
if [[ ! "$UNINSTALL_CURSOR" =~ ^[Nn]$ ]] 2>/dev/null; then
    echo "  ‚úì Cursor Desktop"
fi
if [[ ! "$UNINSTALL_ITERM2" =~ ^[Nn]$ ]] 2>/dev/null; then
    echo "  ‚úì iTerm2"
fi
if [[ ! "$UNINSTALL_GIT" =~ ^[Nn]$ ]] 2>/dev/null; then
    echo "  ‚úì Git, Git LFS, GitHub CLI"
fi
if [[ ! "$REMOVE_GITHUB_DIR" =~ ^[Nn]$ ]] 2>/dev/null; then
    echo "  ‚úì ~/Documents/GitHub directory"
fi
if [[ ! "$UNINSTALL_OHMYZSH" =~ ^[Nn]$ ]] 2>/dev/null; then
    echo "  ‚úì Oh My Zsh and Powerlevel10k"
fi
echo "  ‚úì Zsh plugins (if removed)"
echo ""

info "Components NOT removed:"
echo "  ‚Ä¢ Homebrew (system package manager)"
echo ""

prompt "Next Steps:"
echo ""
echo "1. Reload your shell configuration:"
echo "   source $SHELL_CONFIG"
echo "   (or restart your terminal)"
echo ""
if [ -f "$BACKUP_FILE" ] 2>/dev/null; then
    echo "2. If you removed Oh My Zsh, you may want to restore or clean up ~/.zshrc"
    echo "   Backup available at: $BACKUP_FILE"
    echo ""
    echo "3. To reinstall everything, run:"
else
    echo "2. To reinstall everything, run:"
fi
echo "   ./scripts/environment_install"
echo ""

success "Uninstallation complete! üóëÔ∏è"
